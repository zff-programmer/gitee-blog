(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49d58908"],{5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"88a4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.add}},[t._v(" 新增 ")]),n("el-button",{attrs:{type:"success",icon:"el-icon-view",plain:""},on:{click:t.view}},[t._v(" 查看 ")]),n("el-button",{attrs:{type:"info",icon:"el-icon-edit",plain:""},on:{click:t.edit}},[t._v(" 编辑 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-remove",plain:""},on:{click:t.remove}},[t._v(" 删除 ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.posts,border:"",height:"100% - 40","highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[n("el-table-column",{attrs:{type:"index",width:"100",label:"Seq"}}),t._l(t.columns,(function(e,r){return n("el-table-column",{key:r,attrs:{prop:e.prop,label:e.title},scopedSlots:t._u([{key:"default",fn:function(r){return["date"===e.prop?n("span",[t._v(t._s(t._f("dateFormat")(r.row[e.prop])))]):n("span",[t._v(t._s(r.row[e.prop]))])]}}],null,!0)})}))],2),n("el-pagination",{attrs:{background:"",layout:" prev, pager, next",total:t.totalCount,"page-size":t.pageSize,"current-page":t.currentPage},on:{"prev-click":t.handlePrev,"next-click":t.handleNext,"current-change":t.handlePageChange}})],1)},a=[],i=(n("4de4"),n("4160"),n("b0c0"),n("159b"),n("5530")),o=(n("96cf"),n("1da1")),s=n("714d"),c=(n("6b9a"),{data:function(){return{postList:{},columns:[{title:"name",prop:"name",width:120},{title:"description",prop:"description",width:120},{title:"category",prop:"category",width:120},{title:"author",prop:"author",width:120},{title:"path",prop:"path",width:120},{title:"date",prop:"date",width:120}],currentPage:1,pageSize:20,totalCount:0,selectedFile:null,loading:!0}},mounted:function(){this.getData()},methods:{handleSelectionChange:function(t){this.selectedFile=t.length&&t[0]||null},handleCurrentChange:function(t){this.selectedFile=t},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,s["a"].getFile("db/_post/postList.json");case 3:if(n=e.sent,n){e.next=8;break}return t.loading=!1,t.$message.error("No data"),e.abrupt("return");case 8:t.loading=!1,t.postList=JSON.parse(n.content),t.postList.name=n.name,t.postList.path=n.path,t.postList.sha=n.sha;case 13:case"end":return e.stop()}}),e)})))()},handlePrev:function(){this.currentPage>1&&this.currentPage--},handleNext:function(){this.totalCount/this.pageSize>this.currentPage&&this.currentPage++},handlePageChange:function(t){this.currentPage=t},add:function(){this.$router.push({path:"/admin/list/add"})},view:function(){this.selectedFile&&this.$router.push({path:"/admin/list/view",query:Object(i["a"])({},this.selectedFile)})},edit:function(){this.selectedFile&&this.$router.push({path:"/admin/list/edit",query:Object(i["a"])({},this.selectedFile)})},remove:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectedFile){e.next=2;break}return e.abrupt("return");case 2:if(confirm("确定删除？")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,s["a"].removeFile(t.selectedFile.path);case 6:return n=e.sent,"OK"!==n.status&&t.$message.error(n.msg),t.postList.content.data=t.postList.content.data.filter((function(e){return e.path!=t.selectedFile.path})),e.next=11,s["a"].updateFile(t.postList.path,t.postList.sha,JSON.stringify(t.postList));case 11:n=e.sent,"OK"!==n.status?t.$message.error(n.msg):t.$message(n.msg),t.getData();case 14:case"end":return e.stop()}}),e)})))()}},computed:{posts:function(){var t=[];if(this.postList.content){var e=this.postList.content.data;e.forEach((function(e){t.push(e)}))}return t}}}),u=c,l=(n("b7a9"),n("2877")),p=Object(l["a"])(u,r,a,!1,null,"2c778dbe",null);e["default"]=p.exports},b7a9:function(t,e,n){"use strict";var r=n("ee59"),a=n.n(r);a.a},dbb4:function(t,e,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),o=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),a=s.f,u=i(r),l={},p=0;while(u.length>p)n=a(r,e=u[p++]),void 0!==n&&c(l,e,n);return l}})},e439:function(t,e,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),o=n("06cf").f,s=n("83ab"),c=a((function(){o(1)})),u=!s||c;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(i(t),e)}})},ee59:function(t,e,n){}}]);
//# sourceMappingURL=chunk-49d58908.b2cef044.js.map