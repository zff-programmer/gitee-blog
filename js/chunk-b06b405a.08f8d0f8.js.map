{"version":3,"sources":["webpack:///./src/views/admin/category/index.vue?edd3","webpack:///src/views/admin/category/index.vue","webpack:///./src/views/admin/category/index.vue?9c3b","webpack:///./src/views/admin/category/index.vue","webpack:///./src/views/admin/category/index.vue?c5ce"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","category","item","index","key","attrs","randomColor","on","$event","handleClose","_v","_s","ref","handleInputConfirm","model","value","callback","$$v","inputValue","expression","showInput","staticRenderFns","data","inputVisible","colors","methods","confirm","filter","name","updateCategory","$nextTick","push","Math","floor","random","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAIP,EAAIQ,SAAa,MAAE,SAASC,EAAKC,GAAO,OAAON,EAAG,SAAS,CAACO,IAAID,EAAME,MAAM,CAAC,MAAQZ,EAAIa,cAAc,SAAW,GAAG,uBAAsB,GAAMC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOf,EAAIgB,YAAYP,MAAS,CAACT,EAAIiB,GAAG,IAAIjB,EAAIkB,GAAGT,GAAM,UAAUT,EAAgB,aAAEI,EAAG,WAAW,CAACe,IAAI,eAAeb,YAAY,gBAAgBM,MAAM,CAAC,KAAO,SAASE,GAAG,CAAC,KAAOd,EAAIoB,oBAAoBC,MAAM,CAACC,MAAOtB,EAAc,WAAEuB,SAAS,SAAUC,GAAMxB,EAAIyB,WAAWD,GAAKE,WAAW,gBAAgBtB,EAAG,YAAY,CAACE,YAAY,iBAAiBM,MAAM,CAAC,KAAO,SAASE,GAAG,CAAC,MAAQd,EAAI2B,YAAY,CAAC3B,EAAIiB,GAAG,qBAAqB,IACjuBW,EAAkB,G,wDCatB,GACEC,KADF,WAEI,MAAO,CACLrB,SAAU,GACVsB,cAAc,EACdL,WAAY,GACZM,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,aAGhH,QATF,WASA,wKACA,gBADA,8CAGEC,QAAS,CACP,YADJ,WACA,8KACA,yCADA,UACA,EADA,OAEA,EAFA,uBAGA,4BAHA,0BAMA,iCACA,uBACA,uBACA,qBATA,+CAWI,eAZJ,WAYA,8KACA,6EADA,UACA,EADA,OAEA,gBAFA,uBAGA,wBAHA,0BAMA,kBACA,gBAPA,8CASIhB,YArBJ,SAqBA,GACWiB,QAAQ,WACbhC,KAAKO,SAASqB,KAAO5B,KAAKO,SAASqB,KAAKK,QAAO,SAArD,GACQ,OAAOzB,GAAQ0B,KAEjBlC,KAAKmC,mBAEPT,UA5BJ,WA4BA,WACM1B,KAAK6B,cAAe,EACpB7B,KAAKoC,WAAU,SAArB,GACQ,EAAR,2CAGIjB,mBAlCJ,WAmCM,IAAKnB,KAAKwB,WAGR,OAFAxB,KAAK6B,cAAe,OACpB7B,KAAKwB,WAAa,IAGpBxB,KAAKO,SAASqB,KAAKS,KAAKrC,KAAKwB,YAC7BxB,KAAK6B,cAAe,EACpB7B,KAAKwB,WAAa,GAClBxB,KAAKmC,kBAEPvB,YA7CJ,WA8CM,OAAOZ,KAAK8B,OAAOQ,KAAKC,MAAsB,GAAhBD,KAAKE,cCxEoU,I,wBCQzWC,EAAY,eACd,EACA3C,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAc,E,oECnBf,yBAA4kB,EAAG","file":"js/chunk-b06b405a.08f8d0f8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_vm._l((_vm.category.data),function(item,index){return _c('el-tag',{key:index,attrs:{\"color\":_vm.randomColor(),\"closable\":\"\",\"disable-transitions\":true},on:{\"close\":function($event){return _vm.handleClose(item)}}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":_vm.handleInputConfirm},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=$$v},expression:\"inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showInput}},[_vm._v(\"+ New Category\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"view\">\r\n    <el-tag :key=\"index\" :color=\"randomColor()\" v-for=\"(item,index) in category.data\" closable :disable-transitions=\"true\" @close=\"handleClose(item)\">\r\n      {{item}}\r\n    </el-tag>\r\n    <el-input class=\"input-new-tag\" v-if=\"inputVisible\" v-model=\"inputValue\" ref=\"saveTagInput\" size=\"small\" @blur=\"handleInputConfirm\">\r\n    </el-input>\r\n    <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Category</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { giteeApi } from '@/utils/gitee-api'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      category: {},\r\n      inputVisible: false,\r\n      inputValue: '',\r\n      colors: ['#005387', '#8cb811', '#fdb813', '#88aca1', '#788cb6', '#a1a1a4', '#ced7df', '#decba5', '#566127', '#76daff']\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.getCategory()\r\n  },\r\n  methods: {\r\n    async getCategory() {\r\n      const file = await giteeApi.getFile('db/_post/category.json')\r\n      if (!file) {\r\n        this.$message.error('No data')\r\n        return\r\n      }\r\n      this.category = JSON.parse(file.content)\r\n      this.category.name = file.name\r\n      this.category.path = file.path\r\n      this.category.sha = file.sha\r\n    },\r\n    async updateCategory() {\r\n      const res = await giteeApi.updateFile(this.category.path, this.category.sha, JSON.stringify(this.category))\r\n      if (res.status !== 'OK') {\r\n        this.$message.error(res.msg)\r\n        return\r\n      }\r\n      this.$message(res.msg)\r\n      this.getCategory()\r\n    },\r\n    handleClose(name) {\r\n      if (!confirm('确定删除？')) return\r\n      this.category.data = this.category.data.filter(item => {\r\n        return item != name\r\n      })\r\n      this.updateCategory()\r\n    },\r\n    showInput() {\r\n      this.inputVisible = true\r\n      this.$nextTick(_ => {\r\n        this.$refs.saveTagInput.$refs.input.focus()\r\n      })\r\n    },\r\n    handleInputConfirm() {\r\n      if (!this.inputValue) {\r\n        this.inputVisible = false\r\n        this.inputValue = ''\r\n        return\r\n      }\r\n      this.category.data.push(this.inputValue)\r\n      this.inputVisible = false\r\n      this.inputValue = ''\r\n      this.updateCategory()\r\n    },\r\n    randomColor() {\r\n      return this.colors[Math.floor(Math.random() * 10)]\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.view {\r\n  margin-top: 50px;\r\n  margin-left: 50px;\r\n  .button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n  .input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n    vertical-align: bottom;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=566f1737&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=566f1737&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"566f1737\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=566f1737&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=566f1737&lang=scss&scoped=true&\""],"sourceRoot":""}