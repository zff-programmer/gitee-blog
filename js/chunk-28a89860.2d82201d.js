(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a89860"],{"05c1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"btns"},[r("router-link",{staticStyle:{"margin-right":"10px"},attrs:{to:"/admin/list"}},[r("el-button",{attrs:{type:"info",icon:"el-icon-close",plain:""}},[t._v("退出 ")])],1),"edit"==t.action||"add"==t.action?r("el-button",{attrs:{type:"primary",icon:"el-icon-finished",plain:""},on:{click:t.savePost}},[t._v("保存")]):t._e()],1),r("el-form",{ref:"postForm",attrs:{"label-width":"50px","label-position":"left"}},[r("el-row",{staticClass:"form-row"},[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{attrs:{placeholder:"文章标题"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),r("el-col",{attrs:{span:4,offset:1}},[r("el-form-item",{attrs:{label:"分类"}},[r("el-select",{attrs:{placeholder:"文章类型"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.categories,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),r("el-col",{attrs:{span:13,offset:1}},[r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{attrs:{placeholder:"文章简介"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1)],1),r("mavon-editor",{ref:"md",model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1)],1)},a=[],s=(r("a4d3"),r("e01a"),r("d81d"),r("b0c0"),r("5530")),o=(r("96cf"),r("1da1")),i=r("714d"),c={beforeRouteEnter:function(t,e,r){switch(t.params.action){case"add":document.title="".concat(t.meta.title,"-创建");break;case"edit":document.title="".concat(t.meta.title,"-编辑");break;default:document.title="".concat(t.meta.title,"-查看")}r()},data:function(){return{path:this.$route.query.path,action:this.$route.params.action,post:{},postList:{},categories:[],name:this.$route.query.name,category:this.$route.query.category||"",description:this.$route.query.description||""}},mounted:function(){this.getPost(this.path),this.getPostList(),this.getCategory()},methods:{getPost:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,i["a"].getFile(t);case 4:if(n=r.sent,n){r.next=8;break}return e.$message.error("No data"),r.abrupt("return");case 8:e.post=n;case 9:case"end":return r.stop()}}),r)})))()},getPostList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].getFile("db/_post/postList.json");case 2:if(r=e.sent,r){e.next=6;break}return t.$message.error("No data"),e.abrupt("return");case 6:t.postList=JSON.parse(r.content),t.postList.name=r.name,t.postList.path=r.path,t.postList.sha=r.sha;case 10:case"end":return e.stop()}}),e)})))()},getCategory:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].getFile("db/_post/category.json");case 2:if(r=e.sent,r){e.next=6;break}return t.$message.error("No data"),e.abrupt("return");case 6:t.categories=JSON.parse(r.content).data;case 7:case"end":return e.stop()}}),e)})))()},savePost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("edit"!=t.action){e.next=3;break}return t.updatePost(),e.abrupt("return");case 3:return e.next=5,i["a"].addFile("db/_post/list/".concat(t.name,".md"),t.post.content);case 5:if(r=e.sent,"OK"===r.status){e.next=9;break}return t.$message.error(r.msg),e.abrupt("return");case 9:return t.postList.content.data.push({name:t.name,path:"db/_post/list/".concat(t.name,".md"),description:t.description,category:t.category,author:"Sally Zhang",cover:"",date:new Date}),e.next=12,i["a"].updateFile(t.postList.path,t.postList.sha,JSON.stringify(t.postList));case 12:if(n=e.sent,"OK"===n.status){e.next=16;break}return t.$message.error(n.msg),e.abrupt("return");case 16:t.$message(n.msg),t.$router.push("/admin/list");case 18:case"end":return e.stop()}}),e)})))()},updatePost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].updateFile("db/_post/list/".concat(t.name,".md"),t.post.sha,t.post.content);case 2:if(r=e.sent,"OK"===r.status){e.next=6;break}return t.$message.error(r.msg),e.abrupt("return");case 6:return t.postList.content.data=t.postList.content.data.map((function(e){return e.path==t.path?Object(s["a"])(Object(s["a"])({},e),{},{name:t.name,description:t.description,category:t.category,author:"Sally Zhang",cover:"",date:new Date}):e})),e.next=9,i["a"].updateFile(t.postList.path,t.postList.sha,JSON.stringify(t.postList));case 9:if(n=e.sent,"OK"===n.status){e.next=13;break}return t.$message.error(n.msg),e.abrupt("return");case 13:t.$message(n.msg),t.$router.push("/admin/list");case 15:case"end":return e.stop()}}),e)})))()}}},u=c,p=(r("4a82"),r("2877")),l=Object(p["a"])(u,n,a,!1,null,"69b7c00e",null);e["default"]=l.exports},"48ce":function(t,e,r){},"4a82":function(t,e,r){"use strict";var n=r("48ce"),a=r.n(n);a.a},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},dbb4:function(t,e,r){var n=r("23e7"),a=r("83ab"),s=r("56ef"),o=r("fc6a"),i=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,r,n=o(t),a=i.f,u=s(n),p={},l=0;while(u.length>l)r=a(n,e=u[l++]),void 0!==r&&c(p,e,r);return p}})},e439:function(t,e,r){var n=r("23e7"),a=r("d039"),s=r("fc6a"),o=r("06cf").f,i=r("83ab"),c=a((function(){o(1)})),u=!i||c;n({target:"Object",stat:!0,forced:u,sham:!i},{getOwnPropertyDescriptor:function(t,e){return o(s(t),e)}})}}]);
//# sourceMappingURL=chunk-28a89860.2d82201d.js.map